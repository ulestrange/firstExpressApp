const { string } = require('joi');
const Joi = require('joi');
const mongoose  = require('mongoose');

const contactSchema = new mongoose.Schema({
    name: String,
    phoneNumber: {type : String, default: "unknown"},
    email: String,
    member : Boolean,
    dateJoined: Date,
    moneyPaid: Number,
    proposedBy: mongoose.Types.ObjectId
})

const Contact = mongoose.model('contact', contactSchema);


function ValidateContact (contact) {

 
     const contactJoiSchema = Joi.object({
        name: Joi.string().min(3).required() ,
        phoneNumber: Joi.string(),
        email: Joi.string().email(),
        member : Joi.boolean(),
        dateJoined: Joi.date().min('1989-01-01'),
        moneyPaid: Joi.number().integer().min(100),
        proposedBy: Joi.string()
     })
     return contactJoiSchema.validate(contact);
 }
 

 

module.exports = {Contact, ValidateContact }